{
  "version": 3,
  "sources": ["../src/nodeOps.js", "../src/modules/class.js", "../src/modules/style.js", "../src/modules/event.js", "../src/modules/attr.js", "../src/patchProp.js", "../../runtime-core/src/seq.js", "../../shared/src/shapeFlag.js", "../../shared/src/index.js", "../../runtime-core/src/createVNode.js", "../../runtime-core/src/renderer.js", "../../reactivity/src/effect.js", "../../reactivity/src/ref.js", "../../reactivity/src/handler.js", "../../reactivity/src/reactive.js", "../../reactivity/src/apiWatch.js", "../../reactivity/src/computed.js", "../../runtime-core/src/h.js", "../src/index.js"],
  "sourcesContent": ["export const nodeOps = {\n    // \u521B\u5EFA\u5143\u7D20\n    createElement(element) {\n        return document.createElement(element)\n    },\n    // \u521B\u5EFA\u6587\u672C\n    createText(text) {\n        return document.createTextNode(text)\n    },\n    // \u5BF9\u5143\u7D20\u7684\u63D2\u5165\n    insert(element, container, anchor = null) {\n        // appendChild(element) \u7B49\u4EF7\u4E8E insertBefore(element ,null)\n        container.insertBefore(element, anchor)\n    },\n    // \u5BF9\u5143\u7D20\u7684\u5220\u9664 \u65B9\u6CD5\n    remove(child) {\n        const parent = child.parentNode\n        if (parent) {\n            parent.removeChild(child)\n        }\n    },\n    // \u5143\u7D20\u7684\u67E5\u8BE2\n    querySelector(selector) {\n        return document.querySelector(selector)\n    },\n    // \u8BBE\u7F6E\u5143\u7D20\u7684\u6587\u672C\u5185\u5BB9 innerHTML\u4E0D\u5B89\u5168 \u8FD9\u91CC\u9762\u4F7F\u7528\u7684\u662FtextContent\n    setElementText(element, text) {\n        element.textContent = text // \u8BBE\u7F6E\u5143\u7D20\u7684\u5185\u5BB9\n    },\n    setText(textNode, text) {\n        // \u8BBE\u7F6E\u6587\u672C\u8282\u70B9\u7684\u5185\u5BB9\n        textNode.nodeValue = text\n    },\n    // \u521B\u5EFA\u6CE8\u91CA\u8282\u70B9\n    createComment(text) {\n        return document.createComment(text)\n    },\n    nextSibling(node) {\n        return node.nextSibling\n    },\n    parentNode(node) {\n        return node.parentNode\n    }\n}\n\n\n\n\n\n\n\n\n\n\n", "export function patchClass(el, nextVal) {\n    if (nextVal == null) {\n        el.removeAttribute(\"class\")\n    } else {\n        el.className = nextVal\n    }\n}", "export function patchStyle(el, prevVal, nextVal) {\n    const style = el.style // \u6700\u7EC8\u7684\u64CD\u4F5C\u5C31\u662F\u4ED6\n    if (nextVal) {\n        // \u8FD9\u4E9B\u4E00\u5B9A\u662F\u8981\u751F\u6548\u7684\n        for (let key in nextVal) {\n            // \u8FD9\u5757\u662F\u76F4\u63A5\u8986\u76D6\u7684\uFF0C\u56E0\u4E3A\u6D4F\u89C8\u5668\u4F1A\u81EA\u52A8\u7684\u8BC6\u522B\uFF0C\u5982\u679C\u662F\u76F8\u540C\u7684\uFF0C\u4F1A\u81EA\u52A8\u8BC6\u522B\u4F18\u5316\u7684\n            style[key] = nextVal[key] // \u4F7F\u7528\u65B0\u7684\u6837\u5F0F\u76F4\u63A5\u6DFB\u52A0\u5C31\u53EF\u4EE5\u4E86\n        }\n    }\n    if (prevVal) {\n        for (let key in prevVal) {\n            if (nextVal[key] == null) {\n                style[key] = null // \u5220\u9664\u8001\u5BF9\u8C61\u4E4B\u4E2D\u7684\u6837\u5F0F\u5C31\u53EF\u4EE5\u4E86\n            }\n        }\n    }\n}", "function createInvoker(nextVal) {\n    const fn = (evt) => {\n        fn.value(evt)\n    }\n    fn.value = nextVal // \u771F\u5B9E\u7684\u65B9\u6CD5\uFF0C\u540E\u7EED\u4FEE\u6539\u65B9\u6CD5 \u53EA\u9700\u8981\u4FEE\u6539fn.value\u5C5E\u6027\u5C31\u53EF\u4EE5\u4E86\n    return fn\n}\nexport function patchEvent(el, rawName, nextVal) { // fn1 fn2\n\n    // \u6B63\u5E38\u7684\u601D\u8DEF\u662F\uFF1A\u5148\u5C06\u4E4B\u524D\u7684\u89E3\u7ED1\uFF0C\u7136\u540E\u91CD\u65B0\u7ED1\u5B9A\uFF0C\u4F46\u662F\u8FD9\u6837\u7684\u6027\u80FD\u4E0D\u597D\n\n\n    // \u8FD9\u6837\u5C31\u4E0D\u9700\u8981\u66F4\u6362\u7ED1\u5B9A\u51FD\u6570\u4E86\n    // const fn = () => { fn.value() }\n    // fn.value = fn1\n    // fn.value = fn2\n    // el.addEventListener(key.slice(2).toLowerCase, fn)\n\n    // vue event invoker vue \u4E8B\u4EF6\u8C03\u7528\n    const invokers = el._vei || (el._vei = {}) // \u7F13\u5B58\u5217\u8868\n    let eventName = rawName.slice(2).toLowerCase()\n    // \u770B\u4E00\u4E0B\u662F\u5426\u7ED1\u5B9A\u8FC7\u8FD9\u4E2A\u4E8B\u4EF6\n    const existingInvoker = invokers[eventName]\n    if (nextVal && existingInvoker) { // \u6709\u65B0\u503C \u5E76\u4E14\u7ED1\u5B9A\u8FC7\u4E8B\u4EF6 \u5E94\u8BE5\u662F\u6362\u7ED1\u4E86\n        existingInvoker.value = nextVal\n    } else {\n        // \u8FD9\u91CC\u8868\u793A\u6CA1\u6709\u7ED1\u5B9A\u8FC7\n        if (nextVal) {\n            // \u6709\u6CA1\u6709\u65B0\u7684\u4E8B\u4EF6\n            const invoker = invokers[eventName] = createInvoker(nextVal)\n            el.addEventListener(eventName, invoker)\n        } else if (existingInvoker){ // \u6CA1\u6709\u65B0\u503C\uFF0C\u4F46\u662F\u4E4B\u524D\u7ED1\u5B9A\u8FC7\u4E8B\u4EF6\u4E86\n            // \u6CA1\u6709\u65B0\u7684\u4E8B\u4EF6\n            el.removeEventListener(eventName, existingInvoker)\n            invokers[eventName] = null\n        }\n    }\n}", "export function patchAttr(el, key, nextVal) {\n    if (nextVal) {\n        el.setAttribute(key, nextVal)\n    } else {\n        el.removeAttribute(key)\n    }\n}", "import { patchClass } from \"./modules/class.js\"\nimport { patchStyle } from \"./modules/style.js\"\nimport { patchEvent } from \"./modules/event.js\"\nimport { patchAttr } from \"./modules/attr.js\"\n\n\nexport function patchProp(el, key, prevVal, nextVal) {\n    // \u6839\u636E prevVal \u548C nextVal \u6765\u505Adiff\u7684\u66F4\u65B0\n    /*\n    \u6837\u5F0F\uFF1A\n        old: { color: red}\n        new: {background: red}\n     */\n\n    // class style \u4E8B\u4EF6 \u666E\u901A\u5C5E\u6027 \u8868\u5355\u5C5E\u6027\uFF08true - value\uFF09\n\n    if (key === \"class\") {\n        // class=\"a b c\" => class=\"b c\"\n        // \u7C7B\u7684\u8BDD\u5C31\u76F4\u63A5\u66FF\u6362\u4E86\uFF0C\u4E0D\u6BD4\u5BF9\u4E86\n        patchClass(el, nextVal) // \u5BF9\u7C7B\u540D\u7684\u5904\u7406\n    } else if (key === 'style') {\n        // \u5982\u4F55\u6BD4\u8F83\u4E24\u4E2A\u5BF9\u8C61\u7684\u5DEE\u5F02\n        patchStyle(el, prevVal, nextVal)\n    } else if (/^on[^a-z]/.test(key)) {\n        patchEvent(el, key, nextVal) // \u5728\u4E8B\u4EF6\u5904\u7406\u8FD9\u5757\uFF0C\u90FD\u662F\u4F7F\u7528\u65B0\u7684\u4E8B\u4EF6\u76F4\u63A5\u66FF\u6362\u8001\u7684\u4E8B\u4EF6\n    } else {\n        // \u5176\u4ED6\u5C5E\u6027 \u5C31\u4F1A\u76F4\u63A5\u4F7F\u7528attr\n        patchAttr(el, key, nextVal)\n    }\n\n\n    // vue\u4E4B\u4E2D\u53EF\u4EE5\u7ED9\u5143\u7D20\u7ED1\u5B9A\u591A\u4E2A\u4E8B\u4EF6 @click=() => {} @click = () => {} \u6700\u7EC8vue\u4F1A\u5C06\u8FD9\u4E9B\u5904\u7406\u6210\u4E3A\u6570\u7EC4\n    // \u8FD9\u91CC\u5199\u7684\u65F6\u5019\u53EA\u8003\u8651\u7B80\u5355\u7684\u60C5\u51B5\uFF0C\u5C31\u662F\u53EA\u80FD\u591F\u7ED1\u5B9A\u4E00\u4E2A\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "/*\n\u5982\u4F55\u6C42\u51FA\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\n\n\u6700\u7EC8\u5E8F\u5217\u7684\u7D22\u5F15\u662F\u6211\u4EEC\u9700\u8981\u7684\u7ED3\u679C\n\n[4 3 5 0]\n\n\u5148\u6C42\u51FA\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u7684\u4E2A\u6570\n\n3 5 7 4 2 8 9 11 6 10  \u8D2A\u5FC3\u7B97\u6CD5+\u4E8C\u5206\u67E5\u627E\uFF1A\u627E\u66F4\u6709\u6F5C\u529B\u7684\u4E00\u9879\u4F5C\u4E3A\u672B\u5C3E\n\n3 5 7 8 9 11\n\n3 5 6\n3 7 6\n\n3 5\n3 5 7\n3 4 7 \u9012\u589E\u5E8F\u5217\u67E5\u627E\u67D0\u4E2A\u5143\u7D20 \u53EF\u4EE5\u4F7F\u7528\u4E8C\u5206\u67E5\u627E\n2 4 7\n2 4 7 8\n2 4 7 8 9\n2 4 7 8 9 11\n2 4 6 8 9 11\n2 4 6 8 9 10\n\n// \u6709\u4E86\u4E2A\u6570\uFF0C\u53EF\u4EE5\u91C7\u7528\u5012\u5E8F\u8FFD\u8E2A\u7684\u65B9\u5F0F\n\n3 5 7 8 9 11/10\n */\n\n\n// [1 2 3 4 5 6 7 8 9] -> [0 1 2 3 4 5 6 7 8]\n// 0 \u662F\u4E0D\u9700\u8981\u7BA1\u7684\uFF0C\u56E0\u4E3A0\u4EE3\u8868\u7740\u65B0\u589E\u5417\uFF0C\u9700\u8981\u8FDB\u884C\u5FFD\u7565\u6389\nexport function getSeq(arr) {\n    const result = [0]\n    const len = arr.length\n    const p = arr.slice(0).fill(-1) // \u7528\u6765\u5B58\u50A8\u6807\u8BB0\u7684\u7D22\u5F15 \u5185\u5BB9\u65E0\u6240\u8C13\uFF0C\u4E3B\u8981\u662F\u548C\u6570\u7EC4\u7684\u957F\u5EA6\u4E00\u81F4\n    let start\n    let end\n    let middle\n    for (let i = 0; i < len; i++) {\n        const arrI = arr[i]\n        if (arrI !== 0) {\n            let resultLastIndex = result[result.length - 1] // \u83B7\u53D6\u7ED3\u679C\u96C6\u4E4B\u4E2D\u7684\u6700\u540E\u4E00\u4E2A\n            // \u548CarrI \u4E4B\u4E2D\u7684\u6BD4\u8F83\n            if (arr[resultLastIndex] < arrI) {\n                // \u76F4\u63A5\u5C31\u653E\u5728\u672B\u5C3E\n                result.push(i)\n                p[i] = resultLastIndex // \u8868\u793A\u8BB0\u5F55\u4E0A\u4E00\u6B21\u6700\u540E\u4E00\u4E2A\u4EBA\u7684\u7D22\u5F15\n                continue\n            }\n            // \u5982\u679C\u6BD4\u5F53\u524D\u672B\u5C3E\u5C0F \uFF0C\u9700\u8981\u901A\u8FC7\u4E8C\u5206\u67E5\u627E\u627E\u5230\u6BD4\u5F53\u524D\u8FD9\u4E00\u9879\u5927\u7684\u7528\u8FD9\u4E00\u9879\u66FF\u6362\u6389\n            start = 0\n            end = result.length - 1\n            while (start < end) {\n                middle = (start + end) / 2 | 0 // \u5411\u4E0B\u53D6\u6574\u6570\n                if (arr[result[middle]] < arrI) {\n                    start = middle + 1\n                } else {\n                    end = middle\n                }\n            }\n            // [3 7 8 9] 6 0 1\n            // \u6700\u7EC8start \u548C end\u4F1A\u91CD\u5408\n            //\n            p[i] = result[start - 1] // \u8BB0\u5F55\u524D\u4E00\u4E2A\u4EBA\u7684\u7D22\u5F15\n            result[start] = i // \u76F4\u63A5\u4F7F\u7528\u5F53\u524D\u7684\u7D22\u5F15\u6362\u6389\n        }\n    }\n    console.log(result, p)\n    // \u5B9E\u73B0\u5012\u5E8F\u8FFD\u8E2A\n    let i = result.length // \u603B\u957F\u5EA6\n    let last = result[i - 1] // \u83B7\u53D6\u6700\u540E\u4E00\u9879\n    while (i-- > 0) {\n        result[i] = last // \u6700\u540E\u4E00\u9879\u662F\u6B63\u786E\u7684\n        last = p[last] // \u901A\u8FC7\u6700\u540E\u4E00\u9879\u627E\u5230\u5BF9\u5E94\u7684\u7ED3\u679C\uFF0C\u5C06\u4ED6\u4F5C\u4E3A\u6700\u540E\u4E00\u9879\u6765\u8FFD\u8E2A\n    }\n    return result\n}\n\ngetSeq([2, 3, 1, 5, 6, 8, 7, 9, 4]) // [2 1]\n\n\n\n\n\n\n\n\n\n\n\n", "export const ShapeFlags = {\n    ELEMNT: 1, // \u5143\u7D20\n    FUNCTIONAL_COMPONENT: 1 << 1, // \u51FD\u6570\u5F0F\u7EC4\u4EF6\n    STATEFUL_COMPONENT: 1 << 2, // \u666E\u901A\u72B6\u6001\u7EC4\u4EF6\n    TEXT_CHILDREN: 1 << 3, // \u5143\u7D20\u7684\u513F\u5B50\u662F\u6587\u672C\n    ARRAY_CHILDREN: 1 << 4, // \u5143\u7D20\u7684\u513F\u5B50\u662F\u6570\u7EC4\n    SLOTS_CHILDREN: 1 << 5, // \u7EC4\u4EF6\u7684\u63D2\u69FD\n    TELEPORT: 1 << 6, // \u4F20\u9001\u95E8\u7EC4\u4EF6\n    SUSPENSE: 1 << 7, // \u5F02\u6B65\u52A0\u8F7D\u7EC4\u4EF6\n    COMPONENT_SHOULD_KEPP_ALIVE: 1 << 8, // keep-alive\n    COMPONENT_KEPT_ALIVE: 1 << 9, // keep-alive\n    // \u7EC4\u4EF6\n    COMPONENT: (1 << 2) | (1 << 1)\n}", "export const isObject = val => {\n    return val != null && typeof val === 'object'\n}\n\n\nexport const isFunction = val => {\n    return typeof val === 'function'\n}\n\n\nexport function isString(value) {\n    return typeof value === 'string'\n}\n\nexport * from \"./shapeFlag.js\"", "// h\u65B9\u6CD5\u7684children\u662F\u53EF\u4EE5\u6709\u591A\u4E2A\uFF0C\u662F\u56E0\u4E3Ah\u7684\u5E95\u5C42\u662F\u5C01\u88C5\u4E86createVNode\n// \u8FD9\u5757\u7684children\u53EA\u80FD\u591F\u6709\u4E00\u4E2A\uFF0C\u5982\u679C\u662F\u6570\u7EC4\u7684\u8BDD\uFF0C\u5C31\u4F1A\u8FDB\u884C\u62FC\u63A5\n/*\n\u865A\u62DF\u8282\u70B9\u9700\u8981\u6709\u4E00\u4E9B\u91CD\u8981\u7684\u5C5E\u6027\n    key\n\n */\nimport { isString, ShapeFlags } from \"../../shared/src/index.js\"\nexport function isVNode(value) {\n    return value.__v_isVNode // \u7528\u6765\u5224\u65AD\u662F\u5426\u662F\u865A\u62DF\u8282\u70B9\n}\nexport function isSameVnode(n1, n2) {\n    // \u5982\u679C\u524D\u540E\u6CA1\u6709key\uFF0C\u5C31\u90FD\u662Fundefined \u8BA4\u4E3Akey\u662F\u4E00\u6837\u7684\n    return n1.type === n2.type && n1.key === n2.key\n}\nexport function createVNode(type, props, children = null) {\n    const shapeFlag = isString(type) ? ShapeFlags.ELEMNT : 0\n    const vnode = {\n        __v_isVNode: true, // \u5224\u65AD\u5BF9\u8C61\u662F\u4E0D\u662F\u865A\u62DF\u8282\u70B9\u53EF\u4EE5\u91C7\u7528\u8FD9\u4E2A\u5B57\u6BB5\n        type,\n        props,\n        children,\n        key: props?.key, // \u865A\u62DF\u8282\u70B9\u7684key\uFF0C\u4E3B\u8981\u7528\u4E8Ediff\u7B97\u6CD5\n        el: null, // \u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u7684\u771F\u5B9E\u7684\u8282\u70B9\n        shapeFlag, // \u9760\u4F4D\u8FD0\u7B97 & \u90FD\u662F1\u5C31\u662F1  \u6309\u4F4D\u6216\uFF1A\u6709\u4E00\u4E2A1\u5C31\u662F1\n    }\n    // \u4E0A\u9762\u662F\u63CF\u8FF0\u81EA\u5DF1\u7684\u7C7B\u578B\n    // \u4E0B\u9762\u662F\u63CF\u8FF0\u81EA\u5DF1\u513F\u5B50\u7684\u7C7B\u578B\n    if (children) {\n        let type = 0\n        if (Array.isArray(children)) {\n            // \u81EA\u5DF1\u662F\u5143\u7D20 \u513F\u5B50\u662F\u6570\u7EC4\u7684\u8BDD\n            type |= ShapeFlags.ARRAY_CHILDREN\n        } else {\n            // \u8FD9\u5757\u5168\u90E8\u683C\u5F0F\u5316\u4E3A\u5B57\u7B26\u4E32\n            vnode.children = String(children)\n            type |= ShapeFlags.TEXT_CHILDREN\n        }\n        vnode.shapeFlag |= type\n    }\n    // \u8FD4\u56DE\u4E86\u865A\u62DF\u8282\u70B9\uFF0C\u5E76\u4E14\u6807\u8BC6\u4E86\u865A\u62DF\u8282\u70B9 \u7684 \u7C7B\u578B\n    return vnode\n}\n/*\n\u4F4D\u4E0E\u8FD0\u7B97\n01\n10\n    -\u300B00\n\u6216\u8FD0\u7B97\n    -\u300B11\n\u6743\u9650\u7684\u7EC4\u5408\u53EF\u4EE5\u91C7\u7528 \uFF5C \u7684\u65B9\u5F0F\n001  1  \u7528\u6237\u6743\u9650\n010  2  \u7BA1\u7406\u5458\n100  4  \u8D85\u7EA7\u7BA1\u7406\u5458\n\n\u4EBA -\u300B 001 \uFF5C 010 -\u300B 011 -\u300B 3\n\n011 & 100 -\u300B 0 \u610F\u5473\u7740011\u4E0D\u5305\u542B\u8D85\u7EA7\u7BA1\u7406\u5458\u6743\u9650\n\n\u4F7F\u7528 \uFF5C \u5173\u8054\u7C7B\u578B\uFF0C\u901A\u8FC7 & \u6765\u5224\u65AD\u7C7B\u578B\u662F\u54EA\u4E00\u7C7B\n\n */\n\n\n\n\n\n\n\n\n\n\n\n\n", "// \u8FD9\u4E2A\u662F\u5E95\u5C42createRenderer\u65B9\u6CD5\uFF0C\u7528\u6237\u53EF\u4EE5\u81EA\u5DF1\u4F20\u5165renderOptions\u5B9E\u73B0\u8DE8\u5E73\u53F0\u7684\u65B9\u6848\n// runtime-core\u4E4B\u4E2D\u7684createRenderer\u662F\u4E0D\u57FA\u4E8E\u5E73\u53F0\u7684\nimport { getSeq } from \"./seq.js\"\nimport { ShapeFlags } from \"../../shared/src/shapeFlag.js\"\nimport {isSameVnode} from \"./createVNode.js\";\nexport function createRenderer(renderOptions) {\n    const {\n        createElement: hostCreateElement,\n        createText: hostCreateText,\n        insert: hostInsert,\n        remove: hostRemove,\n        querySelector: hostQuerySelector,\n        setElementText: hostSetElementText,\n        setText: hostSetText,\n        createComment: hostCreateComment,\n        nextSibling: hostNextSibling,\n        parentNode: hostParentNode,\n        patchProp: hostPatchProp\n    } = renderOptions // \u8FD9\u4E9B\u65B9\u6CD5\u548C\u67D0\u4E2A\u5E73\u53F0\u65E0\u5173\u7684\n\n    // ['abc', 'bcd']\n    const mountChildren = (children, container) => {\n        // \u76EE\u524D\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u6CA1\u6709\u5904\u7406\u6587\u672C\u7684\u60C5\u51B5\n        children.forEach(child => {\n            patch(null, child, container)\n        })\n    }\n    const unmountChildren = (children) => {\n        children.forEach(child => {\n            unmount(child)\n        })\n    }\n    const unmount = (vnode) => {\n        // \u56E0\u4E3A\u5378\u8F7D\u7684\u8BDD\uFF0C\u6709\u5F88\u591A\u79CD\u5F62\u5F0F\uFF0C\u5143\u7D20\u7684\u5378\u8F7D\uFF0C\u7EC4\u4EF6\u7684\u5378\u8F7D\u7B49\u7B49\n        // vnode.el\n        const { shapeFlag } = vnode\n        if (shapeFlag & ShapeFlags.ELEMNT) {\n            hostRemove(vnode.el) // \u5BF9\u4E8E\u5143\u7D20\u6765\u8BF4\uFF0C\u76F4\u63A5\u5220\u9664dom\u5C31\u53EF\u4EE5\u554A\n        }\n\n    }\n    const mountElement = (vnode, container, anchor) => {\n        // \u9012\u5F52\u904D\u5386\u865A\u62DF\u8282\u70B9\uFF0C\u5C06\u4ED6\u8F6C\u6362\u4E3A\u771F\u5B9E\u8282\u70B9\n        const { type, props, children, shapeFlag } = vnode\n        // console.log(type, props, children, shapeFlag)\n        const el = hostCreateElement(type)\n        vnode.el = el\n        if (props) {\n            for (let key in props) {\n                hostPatchProp(el, key, null, props[key])\n            }\n        }\n        // children -> null \u6587\u672C \u6570\u7EC4\n        if (children) {\n            if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n                // \u8BF4\u660E\u6B64\u65F6\u662F\u6587\u672C\u7684\u60C5\u51B5\n                hostSetElementText(el, children)\n            } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n                // ['123', 'abc']\n                // [h(), h()]\n                mountChildren(children, el)\n                // children.forEach(child => {\n                //     mountElement( child, el)\n                // })\n            }\n        }\n        hostInsert(el, container, anchor)\n    }\n\n\n    const patchProps = (oldProps, newProps, el) => {\n        // 1) \u5224\u65AD\u65B0\u8001\u662F\u4E0D\u662F\u4E00\u6837\u7684\n        /*\n        eg :  let props = { style: {color: 'red'}}\n        render(h('div', props, abc), app)\n           \u8FD9\u79CD\u60C5\u51B5\u662F\u65B0\u8001\u4E00\u6837\uFF0C\u90FD\u662F\u7528\u7684\u540C\u4E00\u4E2Aprops\uFF0C\u6240\u4EE5\u9700\u8981\u5224\u65AD\uFF0C\u4F46\u662F\u8FD9\u6837\u7684\u60C5\u51B5\u662F\u6BD4\u8F83\u5C11\u7684\n        render(h('div', props, abc), app)\n         */\n        if (oldProps === newProps) {\n            return\n        }\n\n        for (let key in newProps) { // \u771F\u5B9E\u7684\u64CD\u4F5Cdom\n            let prevVal = oldProps[key]\n            let nextVal = newProps[key]\n            if (prevVal !== nextVal) {\n                hostPatchProp(el, key, prevVal, nextVal)\n            }\n        }\n\n        for (let key in oldProps) {\n            if (!(key in newProps)) {\n                hostPatchProp(el, key, oldProps[key], {})\n            }\n        }\n\n    }\n    const patchKeyChildren = (c1, c2, el) => {\n        // \u6839\u636Ekey\u8FDB\u884C\u590D\u7528\n        // vue3\u91C7\u7528\u4E86diff\u7B97\u6CD5\n        // 1)\u540C\u5E8F\u5217\u7684\u6302\u8F7D\u548C\u5378\u8F7D \u4ECE\u5934\u5F00\u59CB\u6BD4\u8F83 \u4ECE\u5C3E\u90E8\u5F00\u59CB\u6BD4\u8F83\uFF0C\u8FD9\u6837\u53EF\u4EE5\u786E\u5B9A\u53D8\u5316\u7684\u90E8\u5206\n        // \u5BF9diff\u7B97\u6CD5\u8FDB\u884C\u4F18\u5316\n        // a b c\n        // a b c d\n        // 2)\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\uFF0C\u8BA1\u7B97\u6700\u5C0F\u504F\u79FB\u91CF\u6765\u8FDB\u884C\u66F4\u65B0\n\n        let i = 0 // \u5F00\u5934\u7684\u4F4D\u7F6E\n        let e1 = c1.length - 1 // \u8001\u7684children\u7684\u7ED3\u5C3E\n        let e2 = c2.length - 1 // \u65B0\u7684children\u7684\u7ED3\u5C3E\n\n        // a b c \u4ECE\u5934\u5F00\u59CB\u6BD4\u8F83\uFF0C\u51FA\u73B0\u4E0D\u4E00\u6837\u5C31\u505C\u6B62\n        // a b d\n        while (i <= e1 && i <= e2) { // sync from start\n            const n1 = c1[i]\n            const n2 = c2[i]\n            if (isSameVnode(n1, n2)) {\n                // \u5982\u679C\u662F\u76F8\u540C\u7684\u8BDD\uFF0C\u5C31\u6BD4\u8F83\n                patch(n1, n2, el)\n            } else {\n                break\n            }\n            i++\n        }\n\n        // sync from end\n        while (i <= e1 && i <= e2) {\n            const n1 = c1[e1]\n            const n2 = c2[e2]\n            if (isSameVnode(n1, n2)) {\n                // \u5982\u679C\u662F\u76F8\u540C\u7684\u8BDD\uFF0C\u5C31\u6BD4\u8F83\n                patch(n1, n2, el)\n            } else {\n                break\n            }\n            e1--\n            e2--\n        }\n\n        // a b c\n        // d e a b c\n        // 0 -1 1\n\n        // a b c\n        // a b c d e\n        // 3 2 4\n\n        /*\n        i \u548C e2 \u6BD4\u8F83\n        i \u548C e1 \u6BD4\u8F83\n         */\n        if ( i > e1) {\n            // a b c\n            // a b c d e\n            // i = 3 e1 = 2 e2 = 4 c2[e2 + 1] \u8BF4\u660E\u662F\u5411\u540E\u63D2\u5165\n            // \u8FD9\u5757\u9700\u8981\u76F4\u5230\u5411\u524D\u8FD8\u662F\u5411\u540E\u63D2\u5165\uFF0C\u5982\u679C\u662F\u5411\u524D\u63D2\u5165\u9700\u8981\u6709\u53C2\u7167\u7269\n            // a b c\n            // d e a b c\n            // i = 0 e1 = -1 e2 = 1 c2[e2+1] \u8BF4\u660E\u662F\u5411\u524D\u63D2\u5165 a\u5C31\u662F\u53C2\u7167\u7269\n            // \u65B0\u7684\u591A \u8001\u7684\u5C11\n            // \u63D2\u5165 i \u5230 e2\u4E4B\u95F4\u7684\n            while (i <= e2) {\n                const nextPos = e2 + 1\n                console.log(nextPos, 163)\n                const anchor = c2[nextPos]?.el // \u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20\u7684el\n                console.log(anchor, 165)\n                patch(null, c2[i], el, anchor)\n                i++\n            }\n        } else if (i > e2) {\n            // \u8BF4\u660E \u8001\u7684\u591A \u65B0\u7684\u5C11\n            // \u9700\u8981\u505A\u5378\u8F7D i\u5230e1\u4E4B\u95F4\u7684\u8FDB\u884C\u5378\u8F7D\n            // a b c d e\n            // a b c\n            // i = 3 e1 = 4 e2 = 2\n\n            // d e a b c\n            // a b c\n            // i = 0 e1 = 1 e2 = -1\n            while (i <= e1) {\n                unmount(c1[i])\n                i++\n            }\n        }\n        console.log(i, e1, e2)\n        // \u4EE5\u4E0A\u7684\u60C5\u51B5 \u5C31\u662F\u4E00\u4E9B\u5934\u5C3E\u7684\u7279\u6B8A\u64CD\u4F5C \u4F46\u662F\u4E0D\u9002\u7528\u4E8E\u5176\u4ED6\u7684\u60C5\u51B5\n        // a b \u3010c d e q \u3011 f g\n        // a b \u3010d c e h \u3011f g\n        // \u53EA\u8981\u662F\u4E0D\u4E00\u6837\u5C31\u4F1A\u76F4\u63A5break\u6389\n        // i = 2 e1 = 4 e2 = 5\n\n\n        let s1 = i\n        let s2 = i\n        // s1 - e1 \u3010c d e q\u3011\n        // s2 - e2 \u3010d c e h\u3011--> [3 2 4 0] \u8FD9\u4E2A\u6570\u7EC4\u7528\u4E8E\u6807\u8BC6\u54EA\u4E9B\u8282\u70B9\u88ABpatch\u8FC7\u4E86\n        // \u4F46\u662F \u5982\u679C\u6CA1\u6709\u524D\u9762\u7684 a b\u4E24\u9879\uFF0C\u4F46\u662F0\u662F\u5B58\u5728\u7279\u6B8A\u7684\u60C5\u51B5\n        // \u5C3D\u53EF\u80FD\u7684\u590D\u7528\u8001\u8282\u70B9\uFF0C\u7136\u540E\u79FB\u52A8\u65B0\u8282\u70B9\n        // \u590D\u7528\u7684\u8BDD\uFF0C\u5C31\u53EA\u80FD\u9760key // \u6839\u636Ekey\u521B\u5EFA\u6620\u5C04\u8868\n        // vue2\u91CC\u9762\u4F7F\u7528\u7684\u662F\u8001\u8282\u70B9\u505A\u7684\u6620\u5C04\u8868\n        // vue3\u91CC\u9762\u4F7F\u7528\u7684\u662F\u65B0\u8282\u70B9\u505A\u7684\u6620\u5C04\u8868\n        const keyToNewIndexMap = new Map()\n        const toBePatched = e2 - s2 + 1 // \u65B0\u7684\u513F\u5B50\u6709\u8FD9\u4E48\u591A\u4E2A\uFF0C\u9700\u8981\u88ABpatch\n        const newIndexToOldIndex = new Array(toBePatched).fill(0)\n\n\n        for (let i =s2; i <= e2; i++) {\n            keyToNewIndexMap.set(c2[i].key, i)\n        }\n        // console.log(keyToNewIndexMap, 204)\n\n        for (let i = s1; i <= e1; i++) {\n            const vnode = c1[i]\n            // console.log(vnode, 'vnode')\n            let newIndex = keyToNewIndexMap.get(vnode.key)\n            if (newIndex == undefined) {\n                // \u8001\u7684\u91CC\u9762 \u6709\u7684\uFF0C\u65B0\u7684\u6CA1\u6709\n\n                unmount(vnode)\n            } else {\n                // \u5176\u4ED6\u60C5\u51B5\u4E0B\u6BD4\u8F83key \u7528\u8001\u7684\u865A\u62DF\u8282\u70B9\u548C\u65B0\u7684\u865A\u62DF\u8282\u70B9\u505A\u6BD4\u5BF9\n                // \u4F46\u662F\u987A\u5E8F\u4E0D\u5BF9\n\n                // \u8BA9\u88ABpatch\u8FC7\u7684\u7D22\u5F15\u8FDB\u884C\u6807\u8BC6\uFF0C\u5F15\u7528\u8001\u8282\u70B9\u7684\u7D22\u5F15\u4F5C\u4E3A\u6807\u8BC6\uFF0C\u9632\u6B62\u51FA\u73B00\u7684\u60C5\u51B5\uFF0C\u56E0\u6B64+1\n                // i + 1 \u5C31\u662F\u4E3A\u4E86\u907F\u514D\u51FA\u73B00\u7684\u60C5\u51B5\n                newIndexToOldIndex[newIndex - s2] = i + 1\n                patch(vnode, c2[newIndex], el)\n            }\n        }\n        // a b [c d e q] f g\n        // a b [d c e h] f g\n        /*\n            \u8FD9\u4E2A\u5176\u5B9E\u4E0D\u7528\u79FB\u52A8 c \u548C e\uFF0C\u5C06d\u63D2\u5165\u5230c\u524D\u9762\u8FFD\u52A0\uFF0C\u5E76\u4E14\u8FFD\u52A0h\n            4 3 5 -\u300B 4 5 3 5\n\n            a b c d e\n\n            c a b d f\n\n            c \u79FB\u52A8\u5230\u524D\u9762 \uFF0C\u8FFD\u52A0f\uFF0C\u5220\u9664e\n         */\n        // \u8FD9\u4E2A\u5176\u5B9E\u4E0D\u7528\u79FB\u52A8 c \u548C e\uFF0C\u5C06d\u63D2\u5165\u5230c\u524D\u9762\u8FFD\u52A0\uFF0C\u5E76\u4E14\u8FFD\u52A0h\n        // h \u63D2\u5165 f \u524D\u9762 e\u63D2\u5165h\u524D\u9762\n        // dom\u64CD\u4F5C \u53EA\u80FD\u5411\u67D0\u4E2A\u5143\u7D20\u7684\u524D\u9762\u63D2\u5165 insertBefore\n        // \u6839\u636E\u6570\u7EC4\u4E4B\u4E2D\u7684\u503C\u6C42\u51FA\u5BF9\u5E94\u7684\u9012\u589E\u5B50\u5E8F\u5217\u7684\u7D22\u5F15\uFF0C\u5F53\u5012\u5E8F\u63D2\u5165\u7684\u65F6\u5019\u8DF3\u8FC7\u5BF9\u5E94\u7684\u7D22\u5F15\u5C31\u53EF\u4EE5\n        // console.log(newIndexToOldIndex)  // [4 3 5 0]\n        const increasingNewIndexSequence = getSeq(newIndexToOldIndex)\n        let j = increasingNewIndexSequence.length - 1 // \u53D6\u51FA\u6570\u7EC4\u7684\u6700\u540E\u4E00\u9879\u7D22\u5F15\n\n\n\n        // console.log(c2)\n        // debugger\n        for (let i = toBePatched - 1; i >= 0 ;i--) {\n            // console.log(s2 + i, s2, i)\n            const current = s2 + i\n            const curNode = c2[current]\n            const anchor = c2[current + 1]?.el // \u53D6\u5230\u4E86f \u53C2\u7167\u7269\n            // console.log(anchor, 238)\n            // \u5982\u679C\u5F53\u524D\u7684\u503C\u662F0\u7684\u8BDD\uFF0C\u65B0\u7684\u4E0D\u5B58\u5728\u7684\uFF0C\u9700\u8981\u521B\u5EFA\u51FA\u6765\u5728\u63D2\u5165\n            if (newIndexToOldIndex[i] == 0) {\n                patch(null, curNode, el, anchor)\n            } else {\n                // \u8FD9\u91CC\u9700\u8981\u5224\u65AD i \u548C j \u5982\u679C\u4E00\u81F4\uFF0C\u8BF4\u660E\u8FD9\u4E00\u9879\u662F\u4E0D\u9700\u8981\u79FB\u52A8\u7684\n                if (i === increasingNewIndexSequence[j]) { // \u5982\u679C\u5F53\u524D\u8FD9\u4E00\u9879\u548C\u5E8F\u5217\u4E4B\u4E2D\u76F8\u7B49\n                    // \u8BF4\u660E\u4E0D\u7528\u4EFB\u4F55\u64CD\u4F5C\uFF0C\u76F4\u63A5\u8DF3\u8FC7\u5C31\u53EF\u4EE5\n                    //\n                    j--\n                } else {\n                    hostInsert(curNode.el, el, anchor)\n                }\n\n            }\n\n        }\n        // \u79FB\u52A8\u7684\u8BDD\u91C7\u7528\u5012\u53D9\u63D2\u5165\u7684\u65B9\u5F0F\uFF0C\u8FDB\u884C\u79FB\u52A8\u8282\u70B9 0\u662F\u65B0\u589E\u7684\uFF0C\u5176\u4ED6\u7684\u60C5\u51B5\u4E0B\u4ECA\u540E\u8FDB\u884C\u63D2\u5165\n\n        // \u8003\u8651\u79FB\u52A8\u95EE\u9898\uFF0C\u548C \u65B0\u7684\u6709\uFF0C\u8001\u7684\u4E48\u6709\u7684\u95EE\u9898\n        // \u63A5\u4E0B\u6765\u9700\u8981\u8BA1\u7B97\u79FB\u52A8\u54EA\u4E9B\u8282\u70B9\n        // \u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\n    }\n\n    const patchChildren = (n1, n2, el) => {\n        // \u6BD4\u8F83\u53CC\u65B9\u7684\u513F\u5B50\u7684\u5DEE\u5F02\n        /*\n        \u51E0\u79CD\u60C5\u51B5\uFF1A\n            \u4E4B\u524D\u6709\u513F\u5B50 \u4E4B\u540E\u6CA1\u6709\u513F\u5B50\n            \u4E4B\u524D\u6CA1\u6709\u513F\u5B50 \u4E4B\u540E\u6709\u513F\u5B50\n            \u4E24\u65B9\u90FD\u6709\u513F\u5B50\n\n        \u65B0    \u8001 3 * 3 = 9 \u5171\u8BA1\u662F9\u79CD\u60C5\u51B5\n        \u6587\u672C  \u6587\u672C\n        null null\n        \u6570\u7EC4  \u6570\u7EC4\n\n        text null array\n         */\n        // \u5168\u91CFdiff\u7B97\u6CD5\uFF0C\u4ECE\u6839\u4E0A\u5F00\u59CB\u6BD4\u8F83\uFF0C\u6BD4\u8F83\u5230\u6700\u7EC8\u7684\u5B50\u8282\u70B9\n        /*\n        \u9012\u5F52 \u5148\u5E8F \u6DF1\u5EA6\u904D\u5386 \u5168\u91CFdiff\u6BD4\u8F83\u662F\u8017\u8D39\u6027\u80FD\uFF0C\u6709\u4E00\u4E9B\u8282\u70B9\u662F\u4E0D\u9700\u8981\u6BD4\u8F83\u7684\n        vue3\u4E4B\u4E2D\u6709\u4E00\u79CD\u65B9\u5F0F\u53EB\u505A\u9776\u573A\u66F4\u65B0\u7684\u65B9\u5F0F\uFF0C\u53EB\u505A\u53EA\u6BD4\u8F83\u52A8\u6001\u8282\u70B9\n\n        div\n            span\n                a\n                    h1\n\n         */\n\n\n        // patchFlag + blockTree \u7F16\u8BD1\u4F18\u5316\uFF0C\u53EA\u6709\u5199\u6A21\u7248\u7684\u65F6\u5019\uFF0C\u624D\u4F1A\u4EAB\u53D7\u8FD9\u79CD\u4F18\u5316\n        // vue3\u662F\u5EFA\u8BAE\u4F7F\u7528\u6A21\u7248\u7684\n        const c1 = n1.children\n        const c2 = n2.children\n\n        const prevShapeFlag = n1.shapeFlag // \u4E4B\u524D\u7684\u5F62\u72B6\n        const shapeFlag = n2.shapeFlag // \u4E4B\u540E\u7684\u5F62\u72B6\n        // 1\uFF09 \u5F53\u524D\u662F\u6587\u672C\u7684\u60C5\u51B5 \u4E4B\u524D\u7684\u662F null \u6587\u672C \u6216\u8005\u662F\u6570\u7EC4\n        if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n            // \u5F53\u524D\u662F\u6587\u672C\n            if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n                // \u8001\u7684\u662F\u6570\u7EC4 \u5168\u90E8\u90FD\u79FB\u9664\u6389\n                // new: hello old:\n                unmountChildren(c1)\n            }\n            // \u65B0\u7684\u662F\u6587\u672C\uFF0C\u8001\u7684\u53EF\u80FD\u662F\u6587\u672C\u6216\u8005\u662Fnull\n            if (c1 !== c2) {\n                hostSetElementText(el, c2)\n            }\n        } else {\n\n            if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n                // \u53CC\u65B9\u90FD\u662F\u6570\u7EC4 \u6838\u5FC3\u7684diff\u7B97\u6CD5\n                // \u4E4B\u524D\u662F\u6570\u7EC4\n\n                // \u5F53\u524D\u65B0\u7684\u662F\u6570\u7EC4\u6216\u8005\u662F\u7A7A\n                if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n                    // \u5168\u91CFdiff\u7684\u6838\u5FC3\u7684\u7B97\u6CD5\n                    patchKeyChildren(c1, c2, el)\n                } else {\n                    // \u73B0\u5728\u662F\u7A7A\u7684\u60C5\u51B5, \u65B0\u7684\u6CA1\u6709\u513F\u5B50\n                    unmountChildren(c1) // \u6587\u672C\u7684\u60C5\u51B5\u5728\u4E0A\u9762\u7684\u5904\u7406\u4E86\n                }\n            } else {\n                // \u8001\u7684\u662F\u6587\u672C\u6216\u8005\u662F\u7A7A\u7684\n                // \u65B0\u7684\u53EF\u80FD\u662F\u6570\u7EC4\n                if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {\n                    // \u8001\u7684\u4E3A\u6587\u672C\uFF0C\u65B0\u7684\u662F\u7A7A\n                    hostSetElementText(el, \"\")\n                }\n                // \u8001\u7684\u4E3A\u7A7A/\u6587\u672C\uFF0C\u65B0\u7684\u662F\u6570\u7EC4\n                if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n                    mountChildren(c2, el)\n                }\n            }\n            // \u8001\u7684\u4E3A\u7A7A\uFF0C\u65B0\u7684\u662F\u6570\u7EC4\u4E0D\u9700\u8981\u7BA1\u4E86\n            // \u65B0\u8001\u90FD\u4E3A\u7A7A \u4E0D\u9700\u8981\u5224\u65AD\u4E86\n        }\n\n    }\n\n    const patchElement = (n1, n2) => {\n        let el = ( n2.el = n1.el ) // \u5C06\u8001\u7684\u865A\u62DF\u8282\u70B9\u4E0A\u7684dom\u76F4\u63A5\u7ED9\u65B0\u7684\u865A\u62DF\u8282\u70B9\n        // \u66F4\u65B0\u5C5E\u6027\n        const oldProps = n1.props || {}\n        const newProps = n2.props || {}\n        // \u6BD4\u8F83\u524D\u540E\u5C5E\u6027\u7684\u5DEE\u5F02  \u53CC\u5FAA\u73AF\n        patchProps(oldProps, newProps, el)\n\n\n        patchChildren(n1, n2, el)\n\n    }\n    const processElement = (n1, n2, container, anchor) => {\n        if (n1 == null) {\n            console.log(\"\u8D70\u4E86\u4E00\u6B21\u521D\u6B21\u6E32\u67D3\u7684\u903B\u8F91\")\n            // \u8BF4\u660E\u5C31\u662F\u521D\u6B21\u6E32\u67D3\n            mountElement(n2, container, anchor)\n        } else {\n            // debugger\n            // \u5143\u7D20\u66F4\u65B0\u4E86\uFF0C\u8FD9\u91CC\u9762\u8D70\u66F4\u65B0\u7684\u903B\u8F91\n            console.log(\"\u8D70\u66F4\u65B0\u7684\u903B\u8F91\")\n            console.log(n1, n2)\n            // \u5143\u7D20\u66F4\u65B0\u4E86\uFF0C\u5C5E\u6027\u53D8\u5316\u4E86 \u66F4\u65B0\u5C5E\u6027\n            patchElement(n1, n2)\n        }\n    }\n\n    const patch = (n1, n2, container, anchor = null) => {\n        // \u8FD9\u91CC\u4E3B\u8981\u662F\u66F4\u65B0\u548C\u521D\u6B21\u6E32\u67D3\n        // \u5982\u679C\u662F\u521D\u6B21\u6E32\u67D3\u7684\u8BDD\uFF0Cn1\u5C31\u662Fnull n2\u662F\u6700\u65B0\u7684\n        // \u5982\u679C\u662F\u66F4\u65B0\u7684\u8BDD\uFF0C\u5C31\u662Fn1 \u548C n2\u90FD\u662F\u6709\u503C\u7684\n\n\n        // n1 \u548C n2\u4E0D\u662F\u540C\u4E00\u4E2A\u5143\u7D20 key\u6216\u8005\u6807\u7B7E\u4E0D\u4E00\u6837\n        // \u5F97\u662F\u66F4\u65B0\u7684\u65F6\u5019\n        if (n1 && !isSameVnode(n1, n2)) {\n            // console.log(\"111111, 241\")\n            unmount(n1)\n            n1 = null\n        }\n        // \u5143\u7D20\u7684\u5904\u7406\n        processElement(n1, n2, container, anchor)\n\n    }\n    const render = (vnode, container) => {\n        // \u865A\u62DF\u8282\u70B9\u7684\u521B\u5EFA\uFF0C\u6700\u7EC8\u751F\u6210\u771F\u5B9E\u7684dom\n        // console.log(vnode, container)\n        // 1) \u5378\u8F7D render(null, app)\n        // 2) \u66F4\u65B0 \u4E4B\u524D\u6E32\u67D3\u8FC7\u4E86\uFF0C\u73B0\u5728\u5728\u6E32\u67D3\uFF0C\u4E4B\u524D\u6E32\u67D3\u8FC7\u4E00\u6B21\uFF0C\u4EA7\u751F\u4E86\u865A\u62DF\u8282\u70B9\uFF0C\u518D\u6B21\u6E32\u67D3\u4EA7\u751F\u4E86\u865A\u62DF\u8282\u70B9\n        // 3) \u521D\u6B21\u6302\u8F7D\n\n        if (vnode == null) {\n            // console.log(\"\u7B2C\u4E00\u6B21\")\n            // \u5982\u679C\u4F20\u9012\u7684vnode\u662Fnull\u7684\u8BDD\uFF0C\u5C31\u662F\u5378\u8F7D\u7684\u903B\u8F91\n            if (container._vnode) {\n                // \u8BF4\u660E\u4E4B\u524D\u6302\u8F7D\u8FC7\uFF0C\u73B0\u5728\u9700\u8981\u79FB\u9664\n                unmount(container._vnode) // \u865A\u62DF\u8282\u70B9\u4E4B\u4E2D\u5B58\u653E\u4E86\u771F\u5B9E\u8282\u70B9\n            }\n        } else {\n            // \u5426\u5219 \u8FD9\u4E2A\u91CC\u9762\u5C31\u662F\u521D\u6B21\u6E32\u67D3\u548C\u66F4\u65B0\u7684\u903B\u8F91\n            // \u5728\u6E90\u7801\u4E4B\u4E2D\u6302\u8F7D\u548C\u66F4\u65B0\u90FD\u5199\u5165\u4E86\u4E00\u4E2A\u65B9\u6CD5\u4E4B\u4E2D\u5C31\u662Fpatch\n            patch(container._vnode || null, vnode, container)\n        }\n\n        // \u8FD9\u6837\u5C31\u662F\u76F8\u5F53\u4E8E\u505A\u4E86\u4E00\u6B21\u5B58\u50A8\n        container._vnode = vnode\n\n\n\n    }\n    return {\n        render\n    }\n}", "export let activeEffect = undefined\nlet id= 0\nfunction cleanupEffect(effect) { // \u5728\u6536\u96C6\u7684\u5217\u8868\u4E4B\u4E2D\u5C06\u81EA\u5DF1\u79FB\u9664\u6389\n    const { deps } = effect\n    for (let i = 0; i < deps.length; i++) {\n        // \u627E\u5230set\uFF0C\u8BA9set\u79FB\u9664\u6389\u81EA\u5DF1\n        deps[i].delete(effect)\n    }\n    effect.deps.length = 0 // \u6E05\u7A7A\u4F9D\u8D56\u7684\u5217\u8868\n}\nexport class ReactiveEffect {\n    constructor(fn, scheduler, flag) {\n        // \u9ED8\u8BA4\u4F1A\u5C06fn\u6302\u8F7D\u5230\u7C7B\u7684\u5B9E\u4F8B\u4E0A\u9762\n        this.fn = fn\n        this.id = id++\n        this.scheduler = scheduler\n        this.flag = flag\n    }\n    active = true // effect\u662F\u5426\u662F\u6FC0\u6D3B\u72B6\u6001\n    parent = null\n    deps = [] // \u4F7F\u7528effect\u6765\u8BB0\u5F55\u6BCF\u4E00\u4E2Aeffect\u6240\u4F9D\u8D56\u7684dep\uFF0C\u6240\u4F9D\u8D56\u7684\u5C5E\u6027\n    run() {\n        // \u5931\u6D3B\u7684\u72B6\u6001\u5728\u9ED8\u8BA4\u8C03\u7528run\u7684\u65F6\u5019\uFF0C\u53EA\u662F\u91CD\u65B0\u6267\u884C\n        // \u5E76\u4E0D\u4F1A\u53D1\u751F\u4F9D\u8D56\u6536\u96C6\n        if (!this.active) {\n            return this.fn()\n        }\n        try {\n            // \u7528\u4E8Eeffect\u5D4C\u5957\u65F6\u5019\u4EA7\u751F\u7684\u7236\u5B50\u5173\u7CFB\uFF0C\u8FD9\u6837\u5C31\u4E0D\u518D\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u6808\u4E86\n            this.parent = activeEffect\n            // \u8BA9\u5C5E\u6027\u548Ceffect\u8FDB\u884C\u5173\u8054\u64CD\u4F5C\n            activeEffect = this\n            cleanupEffect(this)\n            // return \u5C31\u662F\u4E3A\u4E86\u5B9E\u73B0\u8BA1\u7B97\u5C5E\u6027\u6765\u7684\n            return this.fn() // fn \u6267\u884C\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\n            /*\n            effect(() => {\n                // e1\n                effect(() => {\n                    // e2\n                })\n            })\n            e1 -> this.parent = null activeEffect = e1\n            e2 -> this.parent = e1 activeEffect = e2\n            e2 end -> activeEffect = e1 this.parent = null\n            e1 end -> activeEffect = null this.parent = null\n             */\n        } finally {\n            // \u6BCFrun\u4E00\u6B21\u90FD\u9700\u8981\u8FDB\u884C\u6E05\u7A7A\n            activeEffect = this.parent\n            this.parent = null\n        }\n    }\n\n    stop() {\n        if (this.active) {\n            this.active = false\n            cleanupEffect(this)\n        }\n\n    }\n}\nexport function effect(fn, options = {}) {\n    // \u9ED8\u8BA4\u4F1A\u6267\u884C\uFF0C\u6570\u636E\u53D8\u5316\u4E86\u8FD8\u4F1A\u6267\u884C\n    // \u521B\u5EFA\u4E00\u4E2A\u54CD\u5E94\u5F0F\u7684effect\uFF0C\u5E76\u4E14\u8BA9effect\u6267\u884C\n    const _effect = new ReactiveEffect(fn, options.scheduler, \"effect\")\n    _effect.run()\n\n    // \u628Arunner\u65B9\u6CD5\u76F4\u63A5\u7ED9\u7528\u6237\uFF0C\u7528\u6237\u53EF\u4EE5\u53BB\u8C03\u7528effect\u4E4B\u4E2D\u5B9A\u4E49\u7684\u5185\u5BB9\n    const runner = _effect.run.bind(_effect)\n    // \u53EF\u4EE5\u901A\u8FC7runner\u6765\u62FF\u5230effect\u4E4B\u4E2D\u7684\u6240\u6709\u7684\u5C5E\u6027\n    runner.effect = _effect\n    return runner\n}\nconst targetMap = new WeakMap()\nexport function track(target, key) {\n    // \u8BA9\u8FD9\u4E2A\u5BF9\u8C61\u4E0A\u7684\u5C5E\u6027\u8BB0\u5F55\u5F53\u524D\u7684activeEffect\n    // { name: \"jw\"} \"name\" -> [effect, effect]\n    // \u9700\u8981\u8FDB\u884C\u53BB\u91CD\u590D\uFF0Cweakmap map set\n    // 1- \u7528\u6237\u53EA\u5728effect\u4E4B\u4E2D\u7684\u624D\u4F1A\u8FDB\u884C\u89E6\u53D1\n    if (activeEffect) { // \u8BF4\u660E\u7528\u6237\u662F\u5728effect\u4E4B\u4E2D\u4F7F\u7528\u7684\u6570\u636E\uFF0C\u5728effect\u4E4B\u4E2D\u4F7F\u7528\u7684\u6570\u636E\u624D\u4F1A\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\n        let depsMap = targetMap.get(target)\n        // \u5982\u679C\u6CA1\u6709 \u521B\u5EFA\u4E00\u4E2A\u6620\u5C04\u8868\n        if (!depsMap) {\n            targetMap.set(target, (depsMap = new Map()))\n        }\n        // \u5982\u679C\u6709\u8FD9\u4E2A\u6620\u5C04\u8868\uFF0C\u6765\u67E5\u627E\u4E00\u4E2A\u662F\u5426\u6709\u8FD9\u4E2A\u5C5E\u6027\n        let dep = depsMap.get(key)\n        // \u5982\u679C\u6CA1\u6709set\u96C6\u5408 \u521B\u5EFA\u96C6\u5408\n        if (!dep) {\n            depsMap.set(key, (dep = new Set()))\n        }\n        trackEffect(dep)\n        /*\n            {\n            \tproxy1: {\n            \t\tname: Set([effect1, effect2]),\n            \t\tage: Set([effect1, effect2])\n            \t}\n            \tproxy2:\n            \tproxy3:\n            }\n         */\n    }\n}\nexport function trackEffect(dep) {\n    // \u5982\u679C\u6709\u5219\u770B\u4E00\u4E0Bset\u4E4B\u4E2D\u6709\u6CA1\u6709\u8FD9\u4E2Aeffect\n    let shouldTrack = !dep.has(activeEffect)\n    // \u6CA1\u6709\u518D\u53BB\u52A0\n    if (shouldTrack) {\n        // name = new Set(effect1, effect2) -> dep\n        // age = new Set(effect1, effect2) -> dep\n        dep.add(activeEffect)\n        // name: new Set(effect1, effect2)\n        // age: new Set(effect1, effect2)\n        // \u53EF\u4EE5\u901A\u8FC7\u5F53\u524D\u7684effect\u627E\u5230\u8FD9\u4E24\u4E2A\u96C6\u5408\u4E4B\u4E2D\u7684\u81EA\u5DF1\uFF0C\u5C06\u5B83\u79FB\u9664\n        activeEffect.deps.push(dep)\n    }\n}\n\n\nexport function trigger(target, key, newValue, oldValue) {\n    // \u901A\u8FC7\u5BF9\u8C61\u627E\u5230\u5BF9\u5E94\u7684\u5C5E\u6027\uFF0C\u8BA9\u8FD9\u4E2A\u5C5E\u6027\u5BF9\u5E94\u7684\u6240\u6709\u7684effect\u91CD\u65B0\u6267\u884C\n    const depsMap = targetMap.get(target)\n    if (!depsMap) {\n        return\n    }\n    const deps = depsMap.get(key) // name \u6216\u8005 age \u5BF9\u5E94\u7684\u6240\u6709\u7684effect\n    // console.log(\"104\", deps)\n    // \u8FD9\u5757\u5C31\u662F\u4E3A\u4E86\u89E3\u51B3\u4E0D\u8981\u64CD\u4F5C\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u53C8\u662F\u6DFB\u52A0\u53C8\u662F\u5220\u9664\n    // \u8FD0\u884C\u7684\u662F\u6570\u7EC4\uFF0C\u5220\u9664\u7684\u662Fset\n\n    triggerEffect(deps)\n\n}\n\nexport function triggerEffect(deps) {\n    const effects = [...deps]\n    effects && effects.forEach(effect => {\n        // \u6B63\u5728\u6267\u884C\u7684effect\uFF0C\u4E0D\u8981\u591A\u6B21\u6267\u884C\n        /*\n        \u89E3\u51B3\u7684\u662F\u8FD9\u79CD\n        effect(() => {\n            state.name = math.random()\n            app.innerHTML = state.name + state.age\n        })\n         */\n        // console.log(activeEffect)\n        if (effect !== activeEffect) {\n            if (effect.scheduler) {\n                effect.scheduler() // \u7528\u6237\u4F20\u9012\u4E86\u5BF9\u5E94\u7684\u66F4\u65B0\u51FD\u6570\uFF0C\u5C31\u8C03\u7528\u6B64\u51FD\u6570\n            } else {\n                // \u5982\u679C\u7528\u6237\u6CA1\u6709\u4F20\u9012\u5C31\u662F\u9ED8\u8BA4\u91CD\u65B0\u8FD0\u884Ceffect\u51FD\u6570\n                effect.run()\n            }\n        }\n    })\n}\n\n\n\n\n\n\n\n\n\n", "import {isObject} from \"../../shared/src/index.js\";\nimport { reactive } from \"./reactive.js\";\nimport {trackEffect, triggerEffect} from \"./effect.js\";\n\nexport function isRef(value) {\n    return !!(value && value.__v_isRef)\n}\n\n// ref \u5904\u7406\u7684\u662F\u57FA\u672C\u6570\u636E\u7C7B\u578B\nexport function toReactive(value) {\n    return isObject(value) ? reactive(value) : value\n}\nclass RefImpl {\n    _value = null\n    rawValue = null\n    dep = new Set()\n    __v_isRef = true // \u8868\u793A\u540E\u7EED\u6211\u4EEC\u53EF\u4EE5\u589E\u52A0\u62C6\u5305\u7684\u903B\u8F91\n    constructor(rawValue) {\n        this.rawValue = rawValue\n        this._value = toReactive(rawValue)\n    }\n\n    get value() {\n        // \u53D6\u503C\u7684\u65F6\u5019 \u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\n        trackEffect(this.dep)\n        return this._value\n    }\n\n    set value(newVal) {\n        if (newVal !== this.rawValue) {\n            this.rawValue = newVal\n            this._value = toReactive(newVal)\n            triggerEffect(this.dep)\n        }\n    }\n}\n\nexport function ref(value) {\n    return new RefImpl(value)\n}\n\nclass ObjectRefImpl {\n    // \u5C06\u67D0\u4E2A\u5C5E\u6027\u8F6C\u6362\u4E3Aref\n    __v_isRef = true // \u8868\u793A\u540E\u7EED\u6211\u4EEC\u53EF\u4EE5\u589E\u52A0\u62C6\u5305\u7684\u903B\u8F91\n    constructor(object, key) {\n        this.object = object\n        this.key = key\n    }\n\n    get value() {\n        return this.object[this.key]\n    }\n\n    set value(newVal) {\n        this.object[this.key] = newVal\n    }\n}\nexport function toRef(object, key) {\n    return new ObjectRefImpl(object, key)\n}\nexport function toRefs(object) {\n    // object \u6B64\u65F6\u4F1A\u6709\u4E24\u79CD\u60C5\u51B5\uFF1A\u6570\u7EC4 / \u5BF9\u8C61\n    const ret = Array.isArray(object) ? new Array(pbject.length) : Object.create(null)\n\n    for (let key in object) {\n        ret[key] = toRef(object, key)\n    }\n\n    return ret\n}\n\n\nexport function proxyRefs(object) {\n    return new Proxy(object, {\n        get(target, key, receiver) {\n            const v = Reflect.get(target, key, receiver)\n            return isRef(v) ? v.value : v\n        },\n        set(target, key, newVal, receiver) {\n            const oldVal = Reflect.get(target, key, receiver)\n            // \u5982\u679C\u662F\u7ED9ref\u8D4B\u503C\uFF0C\u5E94\u8BE5\u662F\u7ED9\u4ED6\u7684.value \u8FDB\u884C\u8D4B\u503C\n            if (isRef(oldVal)) {\n                oldVal.value = newVal\n                return true\n            } else {\n                // \u5176\u4ED6\u7684\u60C5\u51B5\u4E0B\u76F4\u63A5\u8D4B\u503C\u5C31\u53EF\u4EE5\u4E86\n                return Reflect.set(target, key, newVal, receiver)\n            }\n        }\n    })\n}\n\n\n\n\n\n\n\n", "import { track, trigger } from \"./effect.js\"\nimport { isObject } from \"../../shared/src/index.js\";\nimport { reactive } from \"./reactive.js\"\nimport { isRef } from \"./ref.js\"\nexport const mutableHandlers = {\n    // \u8FD9\u91CC\u9762\u7684receiver\u5C31\u662Fproxy\n    get(target, key, receiver) { // \u6211\u4EEC\u5728\u4F7F\u7528proxy\u7684\u65F6\u5019\uFF0C\u9700\u8981\u642D\u914Dreflect\u6765\u4F7F\u7528\uFF0C\u7528\u6765\u89E3\u51B3this\u7684\u95EE\u9898\n        // \u53D6\u503C\u7684\u65F6\u5019 receiver \u5C31\u662F\u4EE3\u7406\u5BF9\u8C61\n        // console.log(receiver)\n        // \u53D6\u503C\u7684\u65F6\u5019\uFF0C\u8BA9\u8FD9\u4E2A\u5C5E\u6027\u548Ceffect\u4EA7\u751F\u5173\u7CFB\n        // effect \u548C key\u4E4B\u95F4\u662F\u591A\u5BF9\u591A\u7684\u5173\u7CFB \uFF0C\u4F9D\u8D56\u6536\u96C6\n        // console.log(activeEffect, key)\n        // console.log(\"get\", target, key)\n        if (key === \"__v_isReactive\") {\n            // console.log(\"apple\")\n            return true\n        }\n\n        if (isRef(target[key])) {\n            return target[key].value\n        }\n\n        // proxy\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u662F\u53EA\u4EE3\u7406\u4E00\u5C42\u7684\u5BF9\u8C61\n        // \u5982\u679C\u5728\u53D6\u503C\u7684\u65F6\u5019\uFF0C\u53D1\u73B0\u53D6\u51FA\u6765\u7684\u503C\u662F\u5BF9\u8C61\uFF0C\u90A3\u4E48\u8FDB\u884C\u518D\u6B21\u4EE3\u7406\uFF0C\u8FD4\u56DE\u4EE3\u7406\u540E\u7684\u5BF9\u8C61\n        if (isObject(target[key])) {\n            return reactive(target[key])\n        }\n\n\n        const res = Reflect.get(target, key, receiver) // \u7C7B\u4F3C\u4E8Ecall\u65B9\u6CD5\uFF0C\u6539\u53D8this\u7684\u6307\u5411\n        // \u505A--\u4F9D\u8D56\u6536\u96C6 \u8BB0\u5F55\u5C5E\u6027\u548C\u5F53\u524D\u7684effect\u7684\u5173\u7CFB\n        track(target, key)\n        return res\n        // return target[key]\n    },\n    set(target, key, newValue, receiver) {\n        // \u66F4\u65B0\u6570\u636E\n        // target[key] = newValue\n        // \u627E\u5230\u8FD9\u4E2A\u5C5E\u6027\u5BF9\u5E94\u7684effect\u53BB\u6267\u884C\n        // console.log(\"set\", target, key)\n        const oldValue = Reflect.get(target, key, receiver)\n        const r = Reflect.set(target, key, newValue, receiver)\n        if (oldValue !== newValue) {\n            trigger(target, key, newValue, oldValue)\n        }\n\n        return r\n    }\n}", "import { mutableHandlers } from \"./handler.js\"\nimport { isObject } from \"../../shared/src/index.js\";\n\nconst reactiveMap = new WeakMap()\n\nexport function reactive(value) {\n    // reactive \u53EA\u80FD\u5904\u7406\u5BF9\u8C61\u7C7B\u578B\u7684\u6570\u636E\uFF0C\u4E0D\u662F\u5BF9\u8C61\u7684\u8BDD\u4E0D\u5904\u7406\n    if (!isObject(value)) {\n        return value\n    }\n    let existingProxy = reactiveMap.get(value) // \u770B\u4E00\u4E0B\u8FD9\u4E2A\u5BF9\u8C61\u662F\u5426\u6709\u88AB\u4EE3\u7406\u8FC7\n    if (existingProxy) {\n        return existingProxy // \u4EE3\u7406\u8FC7\u7684\u8BDD\u76F4\u63A5\u5C31\u4F1A\u8FD4\u56DE\n    }\n    if (value[\"__v_isReactive\"]) {\n        return value\n    }\n    // proxy \u5FC5\u987B\u662F\u4E00\u4E2A\u5BF9\u8C61\n    const proxy = new Proxy(value, mutableHandlers) // \u6CA1\u6709\u4EE3\u7406\u8FC7\u7684\u8BDD\u4F1A\u521B\u5EFA\u4EE3\u7406\n    reactiveMap.set(value, proxy) // \u7F13\u5B58\u4EE3\u7406\u7ED3\u679C\n\n    // \u5728vue3.0\u7684\u65F6\u5019\uFF0C\u4F1A\u521B\u9020\u4E00\u4E2A\u53CD\u5411\u7684\u6620\u5C04\u8868\n    // \u5728vue3.1\u4EE5\u540E\uFF0C\u91C7\u7528\u65B9\u5F0F\u662F\u5982\u679C\u8FD9\u4E2A\u5BF9\u8C61\u88AB\u4EE3\u7406\u8FC7\u4E86\uFF0C\u8BF4\u660E\u5DF2\u7ECF\u88ABproxy\u62E6\u622A\u8FC7\u5566\n    // \u5982\u679Ctarget\u4E0A\u9762\u6709\u5C5E\u6027\u6807\u8BC6\u7684\u8BDD: __v_isReactive\n    return proxy\n}\n\nexport function isReactive(value) {\n    // \u5224\u65AD\u662F\u5426\u662F\u54CD\u5E94\u5F0F\u7684\n    return value[\"__v_isReactive\"]\n}", "/*\nwatch api \u7684 \u7528\u6CD5\u6BD4\u8F83\u591A\n\u5E38\u89C1\u7684\u5199\u6CD5\u5C31\u662F\u76D1\u63A7\u4E00\u4E2A\u51FD\u6570\u7684\u8FD4\u56DE\u503C\uFF0C\u6839\u636E\u8FD4\u56DE\u503C\u7684\u53D8\u5316\u89E6\u53D1\u5BF9\u5E94\u7684\u51FD\u6570\n\nwatch\u53EF\u4EE5\u4F20\u9012\u4E00\u4E2A\u54CD\u5E94\u5F0F\u7684\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u76D1\u63A7\u5230\u5BF9\u8C61\u7684\u53D8\u5316\u89E6\u53D1\u56DE\u8C03\n\nwatch = effect + \u5305\u88C5\nwatchEffect = effect\n\n */\nimport { isFunction, isObject } from \"../../shared/src/index.js\"\nimport { isReactive } from \"./reactive.js\"\nimport {ReactiveEffect} from \"./effect.js\";\n// watch\u7684\u7279\u70B9\u5C31\u662F\u628A\u51FD\u6570\u8FDB\u884C\u4F9D\u8D56\u7684\u6536\u96C6\uFF0C\u5C5E\u6027\u53D1\u751F\u53D8\u5316\uFF0C\u5C31\u4F1A\u6267\u884C\u5BF9\u5E94\u7684\u56DE\u8C03\u51FD\u6570 effect + scheduler\n\n\n// \u7B49\u4EF7\u4E8E\u6DF1\u62F7\u8D1D seen \u7528\u4E8E\u6807\u8BB0\uFF0C\u9632\u6B62\u6B7B\u5FAA\u73AF\nfunction traverse(value, seen = new Set()) {\n    if (!isObject(value)) {\n        return value\n    }\n\n    // \u5982\u679C\u5DF2\u7ECF\u5FAA\u73AF\u4E86\uFF0C\u8FD9\u4E2A\u5BF9\u8C61\uFF0C\u90A3\u4E48\u5728\u5FAA\u73AF\u7684\u864E\u7259\u5C31\u4F1A\u5BFC\u81F4\u6B7B\u5FAA\u73AF\uFF0C\u6848\u4F8B\u5C31\u662Fwindow.window.window\n    if (seen.has(value)) {\n        return value\n    }\n    seen.add(value)\n\n    for (const key in value) {\n        // \u8FD9\u5757\u5C31\u662F\u8FDB\u884C\u53D6\u503C\u4E86\uFF0C\u53D6\u5C5E\u6027\n        // \u8FD9\u5757\u904D\u5386\u4E86\u4E00\u4E2A\u5BF9\u8C61\u4E4B\u4E2D\u7684\u6240\u6709\u7684\u5C5E\u6027\uFF0C\u8FDB\u800C\u89E6\u53D1 \u5C5E\u6027\u7684 getter\n        traverse(value[key], seen)\n    }\n    return value\n}\n\n\nexport function dowatch(source, cb, options) {\n    // 1) source \u8981\u4E0D\u5C31\u662F\u54CD\u5E94\u5F0F\u7684\u5BF9\u8C61\n    // 2)  \u6216\u8005\u662F\u4E00\u4E2A\u51FD\u6570\n    // \u6570\u7EC4\u7B49\u5F62\u5F0F\u7684\u5148\u4E0D\u8003\u8651\n    let getter = null\n    if (isReactive(source)) {\n        // \u5BF9\u8C61\u7684\u60C5\u51B5 effect \u8981\u6C42\u4F20\u5165\u7684\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u90A3\u4E48\u6211\u4EEC\u9700\u8981\u8FDB\u884C\u5305\u88C5\u4E00\u4E0B\n        // \u5982\u679C\u662F\u76F4\u63A5\u7684state \uFF0C\u662F\u4E0D\u53EF\u4EE5\u7684\uFF0C() => state \u6CA1\u6709\u8FDB\u884C\u4EFB\u4F55\u7684\u53D6\u5C5E\u6027\u7684\u64CD\u4F5C\n        // \u6E90\u7801\u4E4B\u4E2D\uFF0C\u5982\u679C\u662F\u8FD9\u6837\u5199\u7684\u8BDD\uFF0C\u5C31\u662F\u76D1\u63A7\u6240\u6709\u7684\u5C5E\u6027\uFF0C\u6240\u4EE5\u4E0D\u5EFA\u8BAE\u8FD9\u6837\u5199\n        // \u8FD9\u6837\u7684\u8BDD\u5C31\u9700\u8981\u5BF9\u8FD9\u4E2A\u5BF9\u8C61\u8FDB\u884C\u904D\u5386\uFF0C\u7136\u540E\u5168\u90E8\u7684\u53D6\u503C\n        getter = () => traverse(source)\n    } else if (isFunction(source)) {\n        // \u51FD\u6570\u7684\u60C5\u51B5\n        getter = source\n    }\n\n    let oldVal = null\n\n\n    let clear = null\n    const onCleanup = fn => {\n        clear = fn\n    }\n    const job = () => {\n        if (cb) {\n            const newVal = effect.run()\n            if (clear) {\n                clear() // \u4E0B\u6B21\u6267\u884C\u7684\u65F6\u5019\u5C06\u4E0A\u6B21\u7684\u6267\u884C\u4E00\u6B21\n            }\n            cb(newVal, oldVal, onCleanup)\n            oldVal = newVal\n        } else {\n            effect.run() // watchEffect \u53EA\u9700\u8981\u8FD0\u884C\u81EA\u8EAB\u5C31\u53EF\u4EE5\u4E86\n        }\n    }\n    const effect = new ReactiveEffect(getter, job, \"watch\")\n    oldVal = effect.run() // \u4F1A\u8BA9\u5C5E\u6027\u548Ceffect\u5173\u8054\u5728\u4E00\u8D77\n}\nexport function watch(source, cb, options) {\n    return dowatch(source, cb, options)\n}\n\nexport function watchEffect(source, options) {\n    return dowatch(source, null, options)\n}\n\n\n\n\n\n\n\n\n\n\n\n", "import { isFunction } from \"../../shared/src/index.js\";\nimport { ReactiveEffect, activeEffect, trackEffect, triggerEffect } from \"./effect.js\"\n\n\n// \u5BF9\u8C61\uFF1A\u5C5E\u6027\uFF1Aeffect\n// effect\nclass ComputedRefImpl {\n    _dirty = true\n\n    __v_isRef = true // \u8868\u793A\u540E\u7EED\u6211\u4EEC\u53EF\u4EE5\u589E\u52A0\u62C6\u5305\u7684\u903B\u8F91\n\n    dep = new Set()\n    constructor(getter, setter) {\n        this.setter = setter\n        this.effect = new ReactiveEffect(getter, () => {\n            if (!this._dirty) {\n                this._dirty = true // \u4F9D\u8D56\u7684\u503C\u53D1\u751F\u4E86\u53D8\u5316\uFF0C\u9700\u8981\u5C06dirty\u53D8\u4E3Atrue\n\n                // \u5F53\u4F9D\u8D56\u7684\u503C\u53D1\u751F\u4E86\u53D8\u5316\uFF0C\u9700\u8981\u89E6\u53D1\u66F4\u65B0\n                triggerEffect(this.dep)\n            }\n        }, \"computed\")\n    }\n\n    get value() {\n        trackEffect(this.dep)\n        // \u5728\u53D6\u503C\u7684\u65F6\u5019\uFF0C\u9700\u8981\u5BF9\u8BA1\u7B97\u5C5E\u6027\u4E5F\u8981\u505A\u4F9D\u8D56\u6536\u96C6\n        // \u5F53\u4F9D\u8D56\u7684\u503C\u53D1\u751F\u4E86\u53D8\u5316\uFF0C\u9700\u8981\u89E6\u53D1\u66F4\u65B0\n        // dirty \u6765\u5B9E\u73B0\u7F13\u5B58\u6548\u679C\n        if (this._dirty) {\n            this._dirty = false\n            this._value = this.effect.run() // this._value \u5C31\u662F\u53D6\u503C\u4E4B\u540E\u7684\u7ED3\u679C\n        }\n\n        return this._value\n    }\n    set value(newVal) {\n        this.setter(newVal)\n    }\n}\nexport function computed(getterOrOptions) {\n    let getter;\n    let setter\n    const isGetter = isFunction(getterOrOptions)\n    if (isGetter) {\n        getter = getterOrOptions\n        setter = () => {\n            console.log(\"warn\")\n        }\n    } else {\n        // \u5982\u679C\u662F\u5BF9\u8C61\u7684\u8BDD\uFF0C\u5BF9\u8C61\u4E4B\u4E2D\u5FC5\u987B\u8981\u6709getter\n        getter = getterOrOptions.get\n        setter = getterOrOptions.set\n    }\n    console.log(getter, 16)\n    console.log(setter, 17)\n\n    // ref reference \u5F15\u7528\uFF0C\u628A\u4E00\u4E2A\u666E\u901A\u503C\u5305\u88C5\u6210\u4E3A\u5BF9\u8C61\uFF0C\u4F7F\u4E4B\u5177\u5907\u4F9D\u8D56\u6536\u96C6\u7684\u80FD\u529B\n    return new ComputedRefImpl(getter, setter)\n}\n\n\n\n\n\n\n\n\n\n\n\n\n", "/*\nh\u65B9\u6CD5\u6709\u5F88\u591A\u79CD\u53C2\u6570\u7C7B\u578B\nh(\"div\", \"hello\")\n\nh(\"div\", {style: {color: \"red\"}}, \"hello\")\n\n\n\u4F46\u662F\u5E95\u5C42\u90FD\u4F7F\u7528\u4E86 createVNode \u5143\u7D20 \u5C5E\u6027 \u5185\u5BB9\n */\n\nimport { isObject } from \"../../shared/src/index.js\";\nimport {createVNode, isVNode} from \"./createVNode.js\"\n// ()\nexport function h(type, propsOrChildren, children) {\n    const l = arguments.length\n    if (l === 2) {\n        if (isObject(propsOrChildren) && !Array.isArray(propsOrChildren)) {\n            if (isVNode(propsOrChildren)) { // \u662F\u513F\u5B50\u7684\u60C5\u51B5\n                return createVNode(type, null, [propsOrChildren])\n            }\n            // propsOrChildren \u662F \u5C5E\u6027\n            return createVNode(type, propsOrChildren)\n        } else {\n            // \u6570\u7EC4\u7684\u60C5\u51B5\n            // \u6216\u8005\u662F\u6587\u672C\uFF0C\u90FD\u662F\u513F\u5B50\n            return createVNode(type, null, propsOrChildren)\n        }\n        // h('div', { style: {color: 'red'}})\n        // h('div', h('span', null, 'hello')})\n        // h('div', h('span', 'hello')})\n        // h('div', [h('span', null, 'hello')])\n    } else {\n        // >= 3 \u7684 \u60C5\u51B5\n        if (l > 3) {\n            // h('div', null, 'hello', 'abc', 'bcd')\n            children = Array.from(arguments).slice(2)\n        }\n        if (l === 3 && isVNode(children)) {\n            children = [children]\n            // h('div', null, h('span', null, 'hello'))\n        }\n        // \u53C2\u6570 \u5927\u4E8E 3 \u524D\u4E24\u4E2A\u4E4B\u5916\u7684\u6B27\u5F0F\u513F\u5B50\n        // \u7B49\u4E8E3\u7684\u60C5\u51B5 \u7B2C\u4E09\u4E2A\u53C2\u6570\u662F\u865A\u62DF\u8282\u70B9\uFF0C\u9700\u8981\u5305\u88C5\u6210\u4E3A\u6570\u7EC4\n        return createVNode(type, propsOrChildren, children)\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "// \u7528\u6765\u8026\u5408\u6240\u6709\u7684dom\u7684api\n// \u521B\u5EFA \u5143\u7D20\u7684\u589E\u5220\u6539\u67E5\nimport {nodeOps} from \"./nodeOps.js\"\nimport { patchProp } from \"./patchProp.js\"\nimport { createRenderer as renderer } from \"../../runtime-core/src/index.js\"\nconst renderOptions = Object.assign(nodeOps, { patchProp })\n\n\n// \u7528\u6237\u81EA\u5DF1\u521B\u5728\u6E32\u67D3\u5668\uFF0C\u628A\u5C5E\u6027\u4F20\u9012\u8FDB\u6765\n// \u65E0\u8BBA\u662Frender\u65B9\u6CD5\u662F\u57FA\u4E8E\u5E73\u53F0\u7684\nexport function createRenderer(renderOptions) {\n    // \u8FD9\u91CC\u63D0\u4F9B\u4E86\u6E32\u67D3api\uFF0C\u8C03\u7528\u4E86\u5E95\u5C42\u7684render\u65B9\u6CD5\n    return renderer(renderOptions)\n}\n\nexport function render(vnode, container) {\n    // \u5185\u7F6E\u6E32\u67D3\u5668\u4F1A\u81EA\u52A8\u4F20\u5165 domAPI \u4E13\u95E8\u7ED9vue\u670D\u52A1\u7684\n    const renderer = createRenderer(renderOptions)\n    return renderer.render(vnode, container)\n}\nexport * from \"../../runtime-core/src/index.js\"\n\n// \u518D\u6B21\u8FDB\u884C\u62C6\u5206 \u628Arender\u65B9\u6CD5\n\n\n\n\n\n\n\n"],
  "mappings": "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",
  "names": ["i", "type", "renderOptions", "i", "render", "effect", "effect", "createRenderer", "renderOptions"]
}
